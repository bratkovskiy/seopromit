# PROMIT SEO - Система мониторинга позиций в поисковой выдаче

## Описание
PROMIT SEO - это веб-приложение для мониторинга позиций сайтов в поисковой выдаче Яндекса. 
Система позволяет отслеживать позиции ключевых слов, анализировать трафик и собирать статистику 
по различным метрикам с помощью API Яндекс.Вебмастер и Яндекс.Метрики.

## Основные возможности
- Мониторинг позиций ключевых слов в Яндексе
- Отслеживание трафика на страницы сайта
- Сбор исторических данных по позициям
- Визуализация динамики изменения позиций
- Интеграция с Яндекс.Вебмастер и Яндекс.Метрикой

## Установка и настройка
1. Установите Python 3.8 или выше
2. Установите зависимости: `pip install -r requirements.txt`
3. Настройте конфигурацию в файле config.py
4. Создайте базу данных: `python reset_db.py`
5. Запустите приложение: `python run.py`

## Скрипты

### get_historical_positions.py
Скрипт для получения исторических данных о позициях ключевых слов за определенный период.

Использование:
```bash
python scripts/get_historical_positions.py PROJECT_ID PERIODS_COUNT
```

Параметры:
- PROJECT_ID: ID проекта в системе
- PERIODS_COUNT: Количество периодов для сбора данных (1 период = 7 дней)

Пример:
```bash
python scripts/get_historical_positions.py 1 4
```
Получит данные о позициях за последние 4 недели для проекта с ID 1.

Особенности:
- Использует механизм exponential backoff для предотвращения блокировки API
- Автоматически обрабатывает ошибки и повторяет запросы при необходимости
- Сохраняет результаты в базу данных
- Ведет подробное логирование операций

## Безопасность
- Все токены API хранятся в безопасном хранилище
- Реализована защита от превышения лимитов API через механизм backoff
- Поддерживается многопользовательский режим с разграничением доступа

## Системные требования
- Python 3.8+
- MySQL 5.7+
- Современный веб-браузер
- Доступ к API Яндекс.Вебмастер и Яндекс.Метрики

## Поддержка
При возникновении проблем:
1. Проверьте логи в файлах:
   - app.log - основной лог приложения
   - historical_positions.log - лог сбора исторических данных
2. Убедитесь в правильности настроек в config.py
3. Проверьте права доступа токенов API
